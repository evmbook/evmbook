<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 550" width="800" height="550">
  <defs>
    <linearGradient id="bgGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#FAFBFC"/>
      <stop offset="100%" style="stop-color:#F0F4F8"/>
    </linearGradient>
    <filter id="dropShadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="0" dy="3" stdDeviation="5" flood-opacity="0.1"/>
    </filter>
    <linearGradient id="evmGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#1a1a3a"/>
      <stop offset="100%" style="stop-color:#0f0f2f"/>
    </linearGradient>
    <linearGradient id="tokenGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#627EEA"/>
      <stop offset="100%" style="stop-color:#4B6DD0"/>
    </linearGradient>
    <linearGradient id="ammGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#FF007A"/>
      <stop offset="100%" style="stop-color:#D6006A"/>
    </linearGradient>
    <linearGradient id="stableGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#3AB83A"/>
      <stop offset="100%" style="stop-color:#2D8F2D"/>
    </linearGradient>
    <linearGradient id="oracleGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#F59E0B"/>
      <stop offset="100%" style="stop-color:#D97706"/>
    </linearGradient>
    <linearGradient id="lendingGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#8B5CF6"/>
      <stop offset="100%" style="stop-color:#7C3AED"/>
    </linearGradient>
    <linearGradient id="govGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#06B6D4"/>
      <stop offset="100%" style="stop-color:#0891B2"/>
    </linearGradient>
    <marker id="depArrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#627EEA"/>
    </marker>
    <marker id="mutualArrow" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#9CA3AF"/>
    </marker>
  </defs>

  <rect width="100%" height="100%" fill="url(#bgGradient)"/>
  <pattern id="grid" width="40" height="40" patternUnits="userSpaceOnUse">
    <path d="M 40 0 L 0 0 0 40" fill="none" stroke="#E5E7EB" stroke-width="0.5"/>
  </pattern>
  <rect width="100%" height="100%" fill="url(#grid)" opacity="0.4"/>

  <text x="400" y="30" text-anchor="middle" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="#1a1a3a">DeFi Dependency Tree</text>
  <text x="400" y="50" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#6B7280">Bootstrap order for new EVM ecosystems</text>

  <!-- Layer labels (left side) -->
  <g transform="translate(35, 95)">
    <rect x="-25" y="-12" width="50" height="24" rx="4" fill="#E5E7EB"/>
    <text text-anchor="middle" y="5" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#374151">L0</text>
  </g>
  <g transform="translate(35, 165)">
    <rect x="-25" y="-12" width="50" height="24" rx="4" fill="#E5E7EB"/>
    <text text-anchor="middle" y="5" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#374151">L1</text>
  </g>
  <g transform="translate(35, 250)">
    <rect x="-25" y="-12" width="50" height="24" rx="4" fill="#E5E7EB"/>
    <text text-anchor="middle" y="5" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#374151">L2</text>
  </g>
  <g transform="translate(35, 345)">
    <rect x="-25" y="-12" width="50" height="24" rx="4" fill="#E5E7EB"/>
    <text text-anchor="middle" y="5" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#374151">L3</text>
  </g>
  <g transform="translate(35, 430)">
    <rect x="-25" y="-12" width="50" height="24" rx="4" fill="#E5E7EB"/>
    <text text-anchor="middle" y="5" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#374151">L4</text>
  </g>

  <!-- Layer 0: EVM Runtime -->
  <g transform="translate(400, 95)" filter="url(#dropShadow)">
    <rect x="-120" y="-28" width="240" height="56" rx="10" fill="url(#evmGradient)"/>
    <text y="-5" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#FFF">EVM Runtime</text>
    <text y="12" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#9CA3AF">Execution Layer • State Machine • Gas Metering</text>
  </g>

  <!-- Arrow L0 → L1 -->
  <line x1="400" y1="123" x2="400" y2="137" stroke="#627EEA" stroke-width="2" marker-end="url(#depArrow)"/>

  <!-- Layer 1: Token Standard -->
  <g transform="translate(400, 165)" filter="url(#dropShadow)">
    <rect x="-100" y="-25" width="200" height="50" rx="8" fill="url(#tokenGradient)"/>
    <text y="-3" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#FFF">ERC-20 Tokens</text>
    <text y="14" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#C7D2FE">Fungible assets • Transfer standard • Approvals</text>
  </g>

  <!-- Arrows L1 → L2 -->
  <line x1="340" y1="190" x2="270" y2="222" stroke="#627EEA" stroke-width="2" marker-end="url(#depArrow)"/>
  <line x1="460" y1="190" x2="530" y2="222" stroke="#627EEA" stroke-width="2" marker-end="url(#depArrow)"/>

  <!-- Layer 2: AMM + Stablecoins -->
  <g transform="translate(230, 250)" filter="url(#dropShadow)">
    <rect x="-85" y="-25" width="170" height="50" rx="8" fill="url(#ammGradient)"/>
    <text y="-3" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#FFF">AMM / DEX</text>
    <text y="14" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#FFE0EB">Price discovery • Liquidity pools</text>
  </g>
  <g transform="translate(570, 250)" filter="url(#dropShadow)">
    <rect x="-85" y="-25" width="170" height="50" rx="8" fill="url(#stableGradient)"/>
    <text y="-3" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#FFF">Stablecoins</text>
    <text y="14" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#D1FAE5">Quote currency • Unit of account</text>
  </g>

  <!-- Mutual dependency between AMM and Stablecoins -->
  <path d="M 315 250 Q 400 230 485 250" stroke="#9CA3AF" stroke-width="1.5" fill="none" stroke-dasharray="5,3"/>
  <path d="M 485 250 Q 400 270 315 250" stroke="#9CA3AF" stroke-width="1.5" fill="none" stroke-dasharray="5,3"/>
  <rect x="355" y="235" width="90" height="18" rx="3" fill="#FFF" stroke="#E5E7EB"/>
  <text x="400" y="248" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#6B7280">co-dependent</text>

  <!-- Arrows L2 → L3 -->
  <line x1="180" y1="275" x2="140" y2="317" stroke="#627EEA" stroke-width="2" marker-end="url(#depArrow)"/>
  <line x1="280" y1="275" x2="340" y2="317" stroke="#627EEA" stroke-width="2" marker-end="url(#depArrow)"/>
  <line x1="520" y1="275" x2="440" y2="317" stroke="#627EEA" stroke-width="2" marker-end="url(#depArrow)"/>
  <line x1="570" y1="275" x2="570" y2="317" stroke="#627EEA" stroke-width="2" marker-end="url(#depArrow)"/>

  <!-- Layer 3: Oracles + Lending + Governance -->
  <g transform="translate(130, 345)" filter="url(#dropShadow)">
    <rect x="-65" y="-23" width="130" height="46" rx="8" fill="url(#oracleGradient)"/>
    <text y="-3" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#FFF">Oracles</text>
    <text y="13" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#FEF3C7">Price feeds • Off-chain data</text>
  </g>
  <g transform="translate(350, 345)" filter="url(#dropShadow)">
    <rect x="-70" y="-23" width="140" height="46" rx="8" fill="url(#lendingGradient)"/>
    <text y="-3" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#FFF">Lending</text>
    <text y="13" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#EDE9FE">Collateral • Interest rates</text>
  </g>
  <g transform="translate(570, 345)" filter="url(#dropShadow)">
    <rect x="-65" y="-23" width="130" height="46" rx="8" fill="url(#govGradient)"/>
    <text y="-3" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#FFF">Governance</text>
    <text y="13" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#CFFAFE">DAOs • Token voting</text>
  </g>

  <!-- Arrows L2 → L4 (direct dependencies) -->
  <line x1="230" y1="275" x2="220" y2="405" stroke="#627EEA" stroke-width="1.5" stroke-dasharray="4,2" marker-end="url(#depArrow)"/>
  <line x1="280" y1="275" x2="400" y2="405" stroke="#627EEA" stroke-width="1.5" stroke-dasharray="4,2" marker-end="url(#depArrow)"/>

  <!-- Arrows L3 → L4 -->
  <line x1="130" y1="368" x2="580" y2="405" stroke="#627EEA" stroke-width="1.5" marker-end="url(#depArrow)"/>
  <line x1="350" y1="368" x2="580" y2="405" stroke="#627EEA" stroke-width="1.5" marker-end="url(#depArrow)"/>

  <!-- Layer 4: Advanced Applications -->
  <g transform="translate(220, 430)" filter="url(#dropShadow)">
    <rect x="-60" y="-22" width="120" height="44" rx="6" fill="#FFF" stroke="#607D8B" stroke-width="2"/>
    <text y="-2" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#374151">Launchpads</text>
    <text y="14" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#6B7280">Token launches</text>
  </g>
  <g transform="translate(400, 430)" filter="url(#dropShadow)">
    <rect x="-60" y="-22" width="120" height="44" rx="6" fill="#FFF" stroke="#607D8B" stroke-width="2"/>
    <text y="-2" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#374151">NFT Markets</text>
    <text y="14" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#6B7280">Digital collectibles</text>
  </g>
  <g transform="translate(580, 430)" filter="url(#dropShadow)">
    <rect x="-60" y="-22" width="120" height="44" rx="6" fill="#FFF" stroke="#607D8B" stroke-width="2"/>
    <text y="-2" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#374151">Derivatives</text>
    <text y="14" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#6B7280">Options, perps</text>
  </g>

  <!-- Build Order Legend (right side) -->
  <g transform="translate(710, 95)" filter="url(#dropShadow)">
    <rect x="-55" y="-15" width="115" height="120" rx="8" fill="#FFF" stroke="#E5E7EB"/>
    <text y="2" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#374151">Build Order</text>
    <g transform="translate(0, 20)">
      <circle cx="-35" cy="0" r="8" fill="#1a1a3a"/>
      <text x="-35" y="4" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#FFF">1</text>
      <text x="5" y="4" font-family="Arial, sans-serif" font-size="8" fill="#4B5563">EVM + Tokens</text>
    </g>
    <g transform="translate(0, 40)">
      <circle cx="-35" cy="0" r="8" fill="#FF007A"/>
      <text x="-35" y="4" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#FFF">2</text>
      <text x="5" y="4" font-family="Arial, sans-serif" font-size="8" fill="#4B5563">AMM + Stables</text>
    </g>
    <g transform="translate(0, 60)">
      <circle cx="-35" cy="0" r="8" fill="#8B5CF6"/>
      <text x="-35" y="4" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#FFF">3</text>
      <text x="5" y="4" font-family="Arial, sans-serif" font-size="8" fill="#4B5563">Oracle + Lend</text>
    </g>
    <g transform="translate(0, 80)">
      <circle cx="-35" cy="0" r="8" fill="#607D8B"/>
      <text x="-35" y="4" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#FFF">4</text>
      <text x="5" y="4" font-family="Arial, sans-serif" font-size="8" fill="#4B5563">Advanced</text>
    </g>
  </g>

  <!-- Key insight -->
  <g transform="translate(400, 502)">
    <rect x="-300" y="-22" width="600" height="48" rx="8" fill="#FEF3C7" stroke="#F59E0B" stroke-width="1"/>
    <text y="-5" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#92400E">Key Insight</text>
    <text y="10" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#B45309">Each layer depends on the one below. Skip a layer and the ecosystem becomes fragile.</text>
    <text y="22" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#B45309">Native stablecoins and deep AMM liquidity are the foundation of all advanced DeFi.</text>
  </g>
</svg>
