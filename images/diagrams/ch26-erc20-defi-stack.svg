<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 700 720" width="700" height="720">
  <defs>
    <linearGradient id="bgGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#FAFBFC"/>
      <stop offset="100%" style="stop-color:#F0F4F8"/>
    </linearGradient>
    <filter id="dropShadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="0" dy="3" stdDeviation="5" flood-opacity="0.1"/>
    </filter>
    <linearGradient id="evmGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#1a1a3a"/>
      <stop offset="100%" style="stop-color:#0f0f2f"/>
    </linearGradient>
    <linearGradient id="tokenGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#627EEA"/>
      <stop offset="100%" style="stop-color:#4B6DD0"/>
    </linearGradient>
    <linearGradient id="dexGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#FF007A"/>
      <stop offset="100%" style="stop-color:#D6006A"/>
    </linearGradient>
    <linearGradient id="arbGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#10B981"/>
      <stop offset="100%" style="stop-color:#059669"/>
    </linearGradient>
    <linearGradient id="oracleGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#F59E0B"/>
      <stop offset="100%" style="stop-color:#D97706"/>
    </linearGradient>
    <linearGradient id="lendingGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#8B5CF6"/>
      <stop offset="100%" style="stop-color:#7C3AED"/>
    </linearGradient>
    <linearGradient id="stableGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#3AB83A"/>
      <stop offset="100%" style="stop-color:#2D8F2D"/>
    </linearGradient>
    <linearGradient id="derivGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#EC4899"/>
      <stop offset="100%" style="stop-color:#DB2777"/>
    </linearGradient>
    <marker id="depArrow" markerWidth="8" markerHeight="5" refX="7" refY="2.5" orient="auto">
      <polygon points="0 0, 8 2.5, 0 5" fill="#627EEA"/>
    </marker>
  </defs>

  <rect width="100%" height="100%" fill="url(#bgGradient)"/>
  <pattern id="grid" width="40" height="40" patternUnits="userSpaceOnUse">
    <path d="M 40 0 L 0 0 0 40" fill="none" stroke="#E5E7EB" stroke-width="0.5"/>
  </pattern>
  <rect width="100%" height="100%" fill="url(#grid)" opacity="0.3"/>

  <!-- Title -->
  <text x="350" y="35" text-anchor="middle" font-family="Arial, sans-serif" font-size="22" font-weight="bold" fill="#1a1a3a">ERC-20 DeFi Stack</text>
  <text x="350" y="55" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#6B7280">"Money Legos" — Composable DeFi Primitives</text>

  <!-- Sovereign on-chain border -->
  <rect x="50" y="75" width="600" height="620" rx="12" fill="none" stroke="#3AB83A" stroke-width="2" stroke-dasharray="8,4"/>
  <rect x="70" y="65" width="160" height="20" fill="#FAFBFC"/>
  <text x="150" y="80" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#3AB83A">SOVEREIGN ON-CHAIN</text>

  <!-- Layer 0: EVM Chain -->
  <g transform="translate(350, 660)" filter="url(#dropShadow)">
    <rect x="-180" y="-30" width="360" height="60" rx="10" fill="url(#evmGradient)"/>
    <text y="-5" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#FFF">EVM Chain</text>
    <text y="15" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#9CA3AF">Execution • Consensus • State Machine</text>
  </g>

  <!-- Arrow L0 → L1 -->
  <line x1="350" y1="630" x2="350" y2="600" stroke="#627EEA" stroke-width="2" marker-end="url(#depArrow)"/>

  <!-- Layer 1: ERC-20 Tokens -->
  <g transform="translate(350, 570)" filter="url(#dropShadow)">
    <rect x="-160" y="-25" width="320" height="50" rx="10" fill="url(#tokenGradient)"/>
    <text y="-3" text-anchor="middle" font-family="Arial, sans-serif" font-size="15" font-weight="bold" fill="#FFF">ERC-20 Tokens + WETH</text>
    <text y="15" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#C7D2FE">Fungible tokens • Wrapped native token</text>
  </g>

  <!-- Arrow L1 → L2 -->
  <line x1="350" y1="545" x2="350" y2="515" stroke="#627EEA" stroke-width="2" marker-end="url(#depArrow)"/>

  <!-- Layer 2: DEX (Constant Product) -->
  <g transform="translate(350, 485)" filter="url(#dropShadow)">
    <rect x="-150" y="-25" width="300" height="50" rx="10" fill="url(#dexGradient)"/>
    <text y="-3" text-anchor="middle" font-family="Arial, sans-serif" font-size="15" font-weight="bold" fill="#FFF">DEX V2 (x · y = k)</text>
    <text y="15" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#FFE0EB">Uniswap V2 style • needs: tokens only</text>
  </g>

  <!-- Note: No stablecoin required -->
  <g transform="translate(560, 485)">
    <rect x="-60" y="-20" width="120" height="40" rx="6" fill="#FEF3C7" stroke="#F59E0B" stroke-width="1"/>
    <text y="-3" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="#92400E">No stablecoin</text>
    <text y="10" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#B45309">required yet</text>
  </g>

  <!-- Arrow L2 → L3 -->
  <line x1="350" y1="460" x2="350" y2="430" stroke="#627EEA" stroke-width="2" marker-end="url(#depArrow)"/>

  <!-- Layer 3: Cross-Exchange Arbitrage -->
  <g transform="translate(350, 400)" filter="url(#dropShadow)">
    <rect x="-170" y="-25" width="340" height="50" rx="10" fill="url(#arbGradient)"/>
    <text y="-3" text-anchor="middle" font-family="Arial, sans-serif" font-size="15" font-weight="bold" fill="#FFF">Cross-Exchange Arbitrage</text>
    <text y="15" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#D1FAE5">Maintains price parity across DEXs</text>
  </g>

  <!-- Arbitrage detail box -->
  <g transform="translate(130, 400)">
    <rect x="-60" y="-30" width="120" height="60" rx="6" fill="#ECFDF5" stroke="#10B981" stroke-width="1"/>
    <text y="-12" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" font-weight="bold" fill="#065F46">Token pairs</text>
    <text y="0" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#047857">become price</text>
    <text y="12" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#047857">oracles</text>
  </g>

  <!-- Arrow L3 → L4 -->
  <line x1="350" y1="375" x2="350" y2="345" stroke="#627EEA" stroke-width="2" marker-end="url(#depArrow)"/>

  <!-- Layer 4: TWAP Oracles -->
  <g transform="translate(350, 315)" filter="url(#dropShadow)">
    <rect x="-150" y="-25" width="300" height="50" rx="10" fill="url(#oracleGradient)"/>
    <text y="-3" text-anchor="middle" font-family="Arial, sans-serif" font-size="15" font-weight="bold" fill="#FFF">TWAP Oracles</text>
    <text y="15" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#FEF3C7">needs: DEX + TOKEN/STABLE pair</text>
  </g>

  <!-- Bootstrap note -->
  <g transform="translate(560, 315)">
    <rect x="-65" y="-28" width="130" height="56" rx="6" fill="#FEF3C7" stroke="#F59E0B" stroke-width="1"/>
    <text y="-10" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" font-weight="bold" fill="#92400E">Bootstrap options:</text>
    <text y="2" text-anchor="middle" font-family="Arial, sans-serif" font-size="7" fill="#B45309">• 1 bridged stablecoin</text>
    <text y="12" text-anchor="middle" font-family="Arial, sans-serif" font-size="7" fill="#B45309">• Native unit of account</text>
    <text y="22" text-anchor="middle" font-family="Arial, sans-serif" font-size="7" fill="#B45309">• ETH-denominated first</text>
  </g>

  <!-- Arrow L4 → L5 -->
  <line x1="350" y1="290" x2="350" y2="260" stroke="#627EEA" stroke-width="2" marker-end="url(#depArrow)"/>

  <!-- Layer 5: Lending Markets -->
  <g transform="translate(350, 230)" filter="url(#dropShadow)">
    <rect x="-150" y="-25" width="300" height="50" rx="10" fill="url(#lendingGradient)"/>
    <text y="-3" text-anchor="middle" font-family="Arial, sans-serif" font-size="15" font-weight="bold" fill="#FFF">Lending Markets</text>
    <text y="15" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#EDE9FE">Aave/Compound style • needs: TWAP + DEX (liquidations)</text>
  </g>

  <!-- Arrow L5 → L6 -->
  <line x1="350" y1="205" x2="350" y2="175" stroke="#627EEA" stroke-width="2" marker-end="url(#depArrow)"/>

  <!-- Layer 6: CDP Stablecoins -->
  <g transform="translate(350, 145)" filter="url(#dropShadow)">
    <rect x="-150" y="-25" width="300" height="50" rx="10" fill="url(#stableGradient)"/>
    <text y="-3" text-anchor="middle" font-family="Arial, sans-serif" font-size="15" font-weight="bold" fill="#FFF">CDP Stablecoins</text>
    <text y="15" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#D1FAE5">DAI/RAI/LUSD style • needs: TWAP + DEX (liquidations)</text>
  </g>

  <!-- Note: Replaces bridged stable -->
  <g transform="translate(560, 145)">
    <rect x="-60" y="-20" width="120" height="40" rx="6" fill="#DCFCE7" stroke="#22C55E" stroke-width="1"/>
    <text y="-3" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" font-weight="bold" fill="#166534">Sovereign stable</text>
    <text y="10" text-anchor="middle" font-family="Arial, sans-serif" font-size="7" fill="#15803D">replaces bridged</text>
  </g>

  <!-- Arrow L6 → L7 -->
  <line x1="350" y1="120" x2="350" y2="103" stroke="#627EEA" stroke-width="2" marker-end="url(#depArrow)"/>

  <!-- Layer 7: Derivatives & Advanced -->
  <g transform="translate(350, 95)">
    <rect x="-200" y="-8" width="400" height="16" rx="4" fill="url(#derivGradient)"/>
    <text y="5" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#FFF">Derivatives • Prediction Markets • Structured Products</text>
  </g>

  <!-- Build Order Legend -->
  <g transform="translate(620, 600)" filter="url(#dropShadow)">
    <rect x="-55" y="-15" width="115" height="105" rx="8" fill="#FFF" stroke="#E5E7EB"/>
    <text y="0" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="#374151">Build Order</text>
    <g transform="translate(0, 15)">
      <circle cx="-35" cy="0" r="7" fill="#1a1a3a"/>
      <text x="-35" y="3" text-anchor="middle" font-family="Arial, sans-serif" font-size="7" fill="#FFF">1</text>
      <text x="5" y="3" font-family="Arial, sans-serif" font-size="7" fill="#4B5563">EVM + Tokens</text>
    </g>
    <g transform="translate(0, 30)">
      <circle cx="-35" cy="0" r="7" fill="#FF007A"/>
      <text x="-35" y="3" text-anchor="middle" font-family="Arial, sans-serif" font-size="7" fill="#FFF">2</text>
      <text x="5" y="3" font-family="Arial, sans-serif" font-size="7" fill="#4B5563">DEX V2</text>
    </g>
    <g transform="translate(0, 45)">
      <circle cx="-35" cy="0" r="7" fill="#F59E0B"/>
      <text x="-35" y="3" text-anchor="middle" font-family="Arial, sans-serif" font-size="7" fill="#FFF">3</text>
      <text x="5" y="3" font-family="Arial, sans-serif" font-size="7" fill="#4B5563">TWAP Oracles</text>
    </g>
    <g transform="translate(0, 60)">
      <circle cx="-35" cy="0" r="7" fill="#8B5CF6"/>
      <text x="-35" y="3" text-anchor="middle" font-family="Arial, sans-serif" font-size="7" fill="#FFF">4</text>
      <text x="5" y="3" font-family="Arial, sans-serif" font-size="7" fill="#4B5563">Lending + CDP</text>
    </g>
    <g transform="translate(0, 75)">
      <circle cx="-35" cy="0" r="7" fill="#EC4899"/>
      <text x="-35" y="3" text-anchor="middle" font-family="Arial, sans-serif" font-size="7" fill="#FFF">5</text>
      <text x="5" y="3" font-family="Arial, sans-serif" font-size="7" fill="#4B5563">Advanced</text>
    </g>
  </g>

</svg>
