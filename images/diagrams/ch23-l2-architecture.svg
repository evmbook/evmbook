<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 500" width="800" height="500">
  <defs>
    <marker id="arrowDown" markerWidth="10" markerHeight="7" refX="5" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#627EEA"/>
    </marker>
    <marker id="arrowUp" markerWidth="10" markerHeight="7" refX="5" refY="3.5" orient="auto-start-reverse">
      <polygon points="0 0, 10 3.5, 0 7" fill="#627EEA"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="100%" height="100%" fill="#FAFAFA"/>

  <!-- Title -->
  <text x="400" y="30" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#333">
    Layer 2 Rollup Architecture
  </text>

  <!-- L1 (Ethereum) at bottom -->
  <g transform="translate(400, 420)">
    <rect x="-350" y="-30" width="700" height="60" rx="8" fill="#627EEA" stroke="#4B6DD0" stroke-width="2"/>
    <text y="5" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#FFF">Layer 1: Ethereum (Security &amp; Data Availability)</text>
    <text y="22" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#DDD">Settlement | Consensus | State Roots | Calldata/Blobs</text>
  </g>

  <!-- Optimistic Rollup (Left) -->
  <g transform="translate(200, 220)">
    <!-- Header -->
    <rect x="-140" y="-100" width="280" height="35" rx="5" fill="#FF6B6B"/>
    <text y="-78" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#FFF">Optimistic Rollup</text>

    <!-- Main box -->
    <rect x="-140" y="-60" width="280" height="180" rx="5" fill="#FFEBEE" stroke="#FF6B6B" stroke-width="2"/>

    <!-- Components -->
    <rect x="-120" y="-45" width="110" height="40" rx="4" fill="#FFCDD2" stroke="#EF5350" stroke-width="1"/>
    <text x="-65" y="-20" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#333">Sequencer</text>
    <text x="-65" y="-8" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#666">Orders txs</text>

    <rect x="10" y="-45" width="110" height="40" rx="4" fill="#FFCDD2" stroke="#EF5350" stroke-width="1"/>
    <text x="65" y="-20" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#333">Batcher</text>
    <text x="65" y="-8" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#666">Posts to L1</text>

    <rect x="-120" y="10" width="240" height="40" rx="4" fill="#FFCDD2" stroke="#EF5350" stroke-width="1"/>
    <text y="30" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#333">Fraud Proof System</text>
    <text y="42" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#666">7-day challenge window</text>

    <!-- Labels -->
    <text y="75" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">Examples: Arbitrum, Optimism, Base</text>
    <text y="90" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">Assumes valid unless challenged</text>
    <text y="105" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#999">~7 day withdrawal delay</text>
  </g>

  <!-- ZK Rollup (Right) -->
  <g transform="translate(600, 220)">
    <!-- Header -->
    <rect x="-140" y="-100" width="280" height="35" rx="5" fill="#8B5CF6"/>
    <text y="-78" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#FFF">ZK Rollup</text>

    <!-- Main box -->
    <rect x="-140" y="-60" width="280" height="180" rx="5" fill="#EDE9FE" stroke="#8B5CF6" stroke-width="2"/>

    <!-- Components -->
    <rect x="-120" y="-45" width="110" height="40" rx="4" fill="#DDD6FE" stroke="#A78BFA" stroke-width="1"/>
    <text x="-65" y="-20" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#333">Sequencer</text>
    <text x="-65" y="-8" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#666">Orders txs</text>

    <rect x="10" y="-45" width="110" height="40" rx="4" fill="#DDD6FE" stroke="#A78BFA" stroke-width="1"/>
    <text x="65" y="-20" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#333">Prover</text>
    <text x="65" y="-8" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#666">Generates ZKP</text>

    <rect x="-120" y="10" width="240" height="40" rx="4" fill="#DDD6FE" stroke="#A78BFA" stroke-width="1"/>
    <text y="30" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#333">Validity Proof Verification</text>
    <text y="42" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#666">On-chain SNARK/STARK verifier</text>

    <!-- Labels -->
    <text y="75" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">Examples: zkSync, Scroll, Linea</text>
    <text y="90" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">Mathematically proven valid</text>
    <text y="105" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#999">Instant finality once proven</text>
  </g>

  <!-- Connection arrows to L1 -->
  <line x1="200" y1="340" x2="200" y2="375" stroke="#627EEA" stroke-width="2" marker-end="url(#arrowDown)"/>
  <text x="200" y="365" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#627EEA">State roots</text>

  <line x1="600" y1="340" x2="600" y2="375" stroke="#627EEA" stroke-width="2" marker-end="url(#arrowDown)"/>
  <text x="600" y="365" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#627EEA">Proofs + State</text>

  <!-- Data flow label -->
  <g transform="translate(400, 100)">
    <rect x="-120" y="-25" width="240" height="50" rx="5" fill="#FFF" stroke="#DDD" stroke-width="1"/>
    <text y="-5" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#333">Both inherit L1 security</text>
    <text y="12" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">Execute off-chain, verify on-chain</text>
  </g>

  <!-- Comparison box -->
  <g transform="translate(400, 480)">
    <text y="0" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#666">
      Optimistic: Lower compute cost, longer finality | ZK: Higher compute cost, instant finality
    </text>
  </g>
</svg>
