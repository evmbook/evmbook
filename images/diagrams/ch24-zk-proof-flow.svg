<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 500" width="800" height="500">
  <defs>
    <linearGradient id="bgGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#FAFBFC"/>
      <stop offset="100%" style="stop-color:#F0F4F8"/>
    </linearGradient>
    <filter id="dropShadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="0" dy="3" stdDeviation="5" flood-opacity="0.1"/>
    </filter>
    <linearGradient id="witnessGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#F59E0B"/>
      <stop offset="100%" style="stop-color:#D97706"/>
    </linearGradient>
    <linearGradient id="circuitGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#8B5CF6"/>
      <stop offset="100%" style="stop-color:#7C3AED"/>
    </linearGradient>
    <linearGradient id="proofGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#3AB83A"/>
      <stop offset="100%" style="stop-color:#2D8F2D"/>
    </linearGradient>
    <linearGradient id="verifyGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#627EEA"/>
      <stop offset="100%" style="stop-color:#4B6DD0"/>
    </linearGradient>
    <marker id="flowArrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#627EEA"/>
    </marker>
  </defs>

  <rect width="100%" height="100%" fill="url(#bgGradient)"/>
  <pattern id="grid" width="40" height="40" patternUnits="userSpaceOnUse">
    <path d="M 40 0 L 0 0 0 40" fill="none" stroke="#E5E7EB" stroke-width="0.5"/>
  </pattern>
  <rect width="100%" height="100%" fill="url(#grid)" opacity="0.4"/>

  <text x="400" y="30" text-anchor="middle" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="#1a1a3a">Zero-Knowledge Proof Flow</text>
  <text x="400" y="50" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#6B7280">Prove computation correctness without revealing inputs</text>

  <!-- Prover Side Label -->
  <rect x="40" y="75" width="360" height="25" rx="4" fill="#FEF3C7"/>
  <text x="220" y="92" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#92400E">PROVER (Off-chain, expensive)</text>

  <!-- Verifier Side Label -->
  <rect x="440" y="75" width="320" height="25" rx="4" fill="#EEF2FF"/>
  <text x="600" y="92" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#4338CA">VERIFIER (On-chain, cheap)</text>

  <!-- Divider line -->
  <line x1="420" y1="110" x2="420" y2="400" stroke="#E5E7EB" stroke-width="2" stroke-dasharray="8,4"/>

  <!-- Step 1: Private Inputs (Witness) -->
  <g transform="translate(120, 170)" filter="url(#dropShadow)">
    <rect x="-70" y="-45" width="140" height="90" rx="10" fill="url(#witnessGradient)"/>
    <text y="-20" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#FFF">Witness</text>
    <text y="0" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#FEF3C7">(Private Inputs)</text>
    <rect x="-55" y="10" width="110" height="25" rx="3" fill="#FFF" fill-opacity="0.3"/>
    <text y="28" text-anchor="middle" font-family="monospace" font-size="8" fill="#FFF">secret values</text>
  </g>
  <circle cx="120" cy="210" r="12" fill="#F59E0B"/>
  <text x="120" y="214" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#FFF">1</text>

  <!-- Arrow 1→2 -->
  <line x1="190" y1="170" x2="230" y2="170" stroke="#627EEA" stroke-width="2" marker-end="url(#flowArrow)"/>

  <!-- Step 2: Circuit -->
  <g transform="translate(310, 170)" filter="url(#dropShadow)">
    <rect x="-70" y="-45" width="140" height="90" rx="10" fill="url(#circuitGradient)"/>
    <text y="-20" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#FFF">Circuit</text>
    <text y="0" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#EDE9FE">(Arithmetic Gates)</text>
    <rect x="-55" y="10" width="110" height="25" rx="3" fill="#FFF" fill-opacity="0.3"/>
    <text y="28" text-anchor="middle" font-family="monospace" font-size="8" fill="#FFF">constraints</text>
  </g>
  <circle cx="310" cy="210" r="12" fill="#8B5CF6"/>
  <text x="310" y="214" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#FFF">2</text>

  <!-- Public Inputs feeding into circuit -->
  <g transform="translate(310, 290)" filter="url(#dropShadow)">
    <rect x="-55" y="-20" width="110" height="40" rx="6" fill="#FFF" stroke="#6B7280" stroke-width="2"/>
    <text y="5" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#374151">Public Inputs</text>
  </g>
  <line x1="310" y1="270" x2="310" y2="225" stroke="#6B7280" stroke-width="2" marker-end="url(#flowArrow)"/>

  <!-- Arrow 2→3 (proof generation) -->
  <path d="M 380 170 C 430 170, 430 330, 470 330" stroke="#627EEA" stroke-width="2" fill="none" marker-end="url(#flowArrow)"/>
  <text x="410" y="250" font-family="Arial, sans-serif" font-size="8" fill="#627EEA" transform="rotate(90 410 250)">prove()</text>

  <!-- Step 3: Proof -->
  <g transform="translate(540, 330)" filter="url(#dropShadow)">
    <rect x="-70" y="-35" width="140" height="70" rx="10" fill="url(#proofGradient)"/>
    <text y="-10" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#FFF">ZK Proof</text>
    <text y="8" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#D1FAE5">(SNARK/STARK)</text>
    <text y="22" text-anchor="middle" font-family="monospace" font-size="8" fill="#A7F3D0">~300 bytes</text>
  </g>
  <circle cx="540" cy="380" r="12" fill="#3AB83A"/>
  <text x="540" y="384" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#FFF">3</text>

  <!-- Arrow 3→4 -->
  <line x1="610" y1="330" x2="650" y2="330" stroke="#627EEA" stroke-width="2" marker-end="url(#flowArrow)"/>

  <!-- Step 4: On-chain Verifier -->
  <g transform="translate(720, 330)" filter="url(#dropShadow)">
    <rect x="-60" y="-35" width="120" height="70" rx="10" fill="url(#verifyGradient)"/>
    <text y="-10" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#FFF">Verifier</text>
    <text y="8" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#C7D2FE">(On-chain)</text>
    <text y="22" text-anchor="middle" font-family="monospace" font-size="8" fill="#A5B4FC">~200k gas</text>
  </g>
  <circle cx="720" cy="380" r="12" fill="#627EEA"/>
  <text x="720" y="384" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#FFF">4</text>

  <!-- Output: true/false -->
  <g transform="translate(720, 230)">
    <rect x="-45" y="-20" width="90" height="40" rx="8" fill="#ECFDF5" stroke="#3AB83A" stroke-width="2"/>
    <text y="6" text-anchor="middle" font-family="monospace" font-size="11" font-weight="bold" fill="#166534">true</text>
  </g>
  <line x1="720" y1="295" x2="720" y2="270" stroke="#3AB83A" stroke-width="2" marker-end="url(#flowArrow)"/>

  <!-- SNARK vs STARK comparison -->
  <g transform="translate(215, 400)" filter="url(#dropShadow)">
    <rect x="-170" y="-35" width="340" height="70" rx="8" fill="#FFF" stroke="#E5E7EB" stroke-width="1"/>
    <text y="-18" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#374151">SNARK vs STARK</text>
    <text x="-85" y="0" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="#8B5CF6">SNARK</text>
    <text x="-85" y="14" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#6B7280">Smaller proofs (~300B)</text>
    <text x="-85" y="26" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#6B7280">Trusted setup required</text>
    <text x="85" y="0" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="#3AB83A">STARK</text>
    <text x="85" y="14" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#6B7280">Larger proofs (~50KB)</text>
    <text x="85" y="26" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#6B7280">No trusted setup</text>
    <line x1="0" y1="-8" x2="0" y2="30" stroke="#E5E7EB" stroke-width="1"/>
  </g>

  <!-- Key insight -->
  <g transform="translate(600, 460)">
    <rect x="-180" y="-20" width="360" height="40" rx="6" fill="#EDE9FE" stroke="#8B5CF6" stroke-width="1"/>
    <text y="-2" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="#6D28D9">Key Insight</text>
    <text y="14" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#7C3AED">Verification is O(1) regardless of computation size. Proving is expensive; verifying is cheap.</text>
  </g>
</svg>
