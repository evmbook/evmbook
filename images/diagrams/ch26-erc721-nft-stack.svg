<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 700 600" width="700" height="600">
  <defs>
    <linearGradient id="bgGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#FAFBFC"/>
      <stop offset="100%" style="stop-color:#F0F4F8"/>
    </linearGradient>
    <filter id="dropShadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="0" dy="3" stdDeviation="5" flood-opacity="0.1"/>
    </filter>
    <linearGradient id="evmGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#1a1a3a"/>
      <stop offset="100%" style="stop-color:#0f0f2f"/>
    </linearGradient>
    <linearGradient id="nftGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#8B5CF6"/>
      <stop offset="100%" style="stop-color:#7C3AED"/>
    </linearGradient>
    <linearGradient id="marketGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#F97316"/>
      <stop offset="100%" style="stop-color:#EA580C"/>
    </linearGradient>
    <linearGradient id="lendGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#06B6D4"/>
      <stop offset="100%" style="stop-color:#0891B2"/>
    </linearGradient>
    <linearGradient id="derivGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#EC4899"/>
      <stop offset="100%" style="stop-color:#DB2777"/>
    </linearGradient>
    <linearGradient id="wethGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#627EEA"/>
      <stop offset="100%" style="stop-color:#4B6DD0"/>
    </linearGradient>
    <marker id="depArrow" markerWidth="8" markerHeight="5" refX="7" refY="2.5" orient="auto">
      <polygon points="0 0, 8 2.5, 0 5" fill="#8B5CF6"/>
    </marker>
  </defs>

  <rect width="100%" height="100%" fill="url(#bgGradient)"/>
  <pattern id="grid" width="40" height="40" patternUnits="userSpaceOnUse">
    <path d="M 40 0 L 0 0 0 40" fill="none" stroke="#E5E7EB" stroke-width="0.5"/>
  </pattern>
  <rect width="100%" height="100%" fill="url(#grid)" opacity="0.3"/>

  <!-- Title -->
  <text x="350" y="35" text-anchor="middle" font-family="Arial, sans-serif" font-size="22" font-weight="bold" fill="#1a1a3a">ERC-721 NFT Stack</text>
  <text x="350" y="55" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#6B7280">Non-Fungible Token Application Layer</text>

  <!-- Sovereign on-chain border -->
  <rect x="50" y="75" width="600" height="500" rx="12" fill="none" stroke="#8B5CF6" stroke-width="2" stroke-dasharray="8,4"/>
  <rect x="70" y="65" width="160" height="20" fill="#FAFBFC"/>
  <text x="150" y="80" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#8B5CF6">SOVEREIGN ON-CHAIN</text>

  <!-- Layer 0: EVM Chain -->
  <g transform="translate(350, 540)" filter="url(#dropShadow)">
    <rect x="-180" y="-30" width="360" height="60" rx="10" fill="url(#evmGradient)"/>
    <text y="-5" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#FFF">EVM Chain</text>
    <text y="15" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#9CA3AF">Execution • Consensus • State Machine</text>
  </g>

  <!-- Arrow L0 → L1 -->
  <line x1="350" y1="510" x2="350" y2="480" stroke="#8B5CF6" stroke-width="2" marker-end="url(#depArrow)"/>

  <!-- Layer 1: ERC-721 + WETH (side by side) -->
  <g transform="translate(250, 450)" filter="url(#dropShadow)">
    <rect x="-110" y="-25" width="220" height="50" rx="10" fill="url(#nftGradient)"/>
    <text y="-3" text-anchor="middle" font-family="Arial, sans-serif" font-size="15" font-weight="bold" fill="#FFF">ERC-721 Tokens</text>
    <text y="15" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#EDE9FE">Non-fungible • Unique ownership</text>
  </g>

  <g transform="translate(510, 450)" filter="url(#dropShadow)">
    <rect x="-70" y="-25" width="140" height="50" rx="10" fill="url(#wethGradient)"/>
    <text y="-3" text-anchor="middle" font-family="Arial, sans-serif" font-size="15" font-weight="bold" fill="#FFF">WETH</text>
    <text y="15" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#C7D2FE">Payment token</text>
  </g>

  <!-- Arrows L1 → L2 -->
  <line x1="250" y1="425" x2="300" y2="380" stroke="#8B5CF6" stroke-width="2" marker-end="url(#depArrow)"/>
  <line x1="510" y1="425" x2="400" y2="380" stroke="#8B5CF6" stroke-width="2" marker-end="url(#depArrow)"/>

  <!-- Layer 2: NFT Marketplaces -->
  <g transform="translate(350, 350)" filter="url(#dropShadow)">
    <rect x="-170" y="-30" width="340" height="60" rx="10" fill="url(#marketGradient)"/>
    <text y="-8" text-anchor="middle" font-family="Arial, sans-serif" font-size="15" font-weight="bold" fill="#FFF">NFT Marketplaces</text>
    <text y="10" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#FFEDD5">Seaport (OpenSea) • Blur • LooksRare</text>
    <text y="24" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#FED7AA">needs: ERC-721 + payment token (WETH/ETH)</text>
  </g>

  <!-- Evolution note -->
  <g transform="translate(130, 350)">
    <rect x="-60" y="-35" width="120" height="70" rx="6" fill="#FFF7ED" stroke="#F97316" stroke-width="1"/>
    <text y="-18" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" font-weight="bold" fill="#9A3412">Evolution:</text>
    <text y="-5" text-anchor="middle" font-family="Arial, sans-serif" font-size="7" fill="#C2410C">Wyvern (2017)</text>
    <text y="7" text-anchor="middle" font-family="Arial, sans-serif" font-size="7" fill="#C2410C">→ Seaport (2022)</text>
    <text y="19" text-anchor="middle" font-family="Arial, sans-serif" font-size="7" fill="#C2410C">→ Blur (2022)</text>
  </g>

  <!-- Arrow L2 → L3 -->
  <line x1="350" y1="320" x2="350" y2="280" stroke="#8B5CF6" stroke-width="2" marker-end="url(#depArrow)"/>

  <!-- Layer 3: NFT Lending -->
  <g transform="translate(350, 250)" filter="url(#dropShadow)">
    <rect x="-170" y="-30" width="340" height="60" rx="10" fill="url(#lendGradient)"/>
    <text y="-8" text-anchor="middle" font-family="Arial, sans-serif" font-size="15" font-weight="bold" fill="#FFF">NFT Lending</text>
    <text y="10" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#CFFAFE">NFTfi • BendDAO • ParaSpace</text>
    <text y="24" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#A5F3FC">needs: marketplace (floor price) + WETH</text>
  </g>

  <!-- Pricing note -->
  <g transform="translate(570, 250)">
    <rect x="-60" y="-28" width="120" height="56" rx="6" fill="#ECFEFF" stroke="#06B6D4" stroke-width="1"/>
    <text y="-10" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" font-weight="bold" fill="#0E7490">Floor price</text>
    <text y="2" text-anchor="middle" font-family="Arial, sans-serif" font-size="7" fill="#0891B2">from marketplace</text>
    <text y="14" text-anchor="middle" font-family="Arial, sans-serif" font-size="7" fill="#0891B2">= collateral value</text>
  </g>

  <!-- Arrow L3 → L4 -->
  <line x1="350" y1="220" x2="350" y2="180" stroke="#8B5CF6" stroke-width="2" marker-end="url(#depArrow)"/>

  <!-- Layer 4: NFT Derivatives -->
  <g transform="translate(350, 150)" filter="url(#dropShadow)">
    <rect x="-180" y="-30" width="360" height="60" rx="10" fill="url(#derivGradient)"/>
    <text y="-8" text-anchor="middle" font-family="Arial, sans-serif" font-size="15" font-weight="bold" fill="#FFF">NFT Derivatives &amp; Financialization</text>
    <text y="10" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#FCE7F3">Floor perps • Fractionalization (ERC-20) • NFT indexes</text>
    <text y="24" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#FBCFE8">needs: reliable floor pricing + lending liquidity</text>
  </g>

  <!-- Crossover note -->
  <g transform="translate(130, 150)">
    <rect x="-60" y="-25" width="120" height="50" rx="6" fill="#FDF2F8" stroke="#EC4899" stroke-width="1"/>
    <text y="-8" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" font-weight="bold" fill="#9D174D">Crossover:</text>
    <text y="5" text-anchor="middle" font-family="Arial, sans-serif" font-size="7" fill="#BE185D">Fractionalized NFTs</text>
    <text y="17" text-anchor="middle" font-family="Arial, sans-serif" font-size="7" fill="#BE185D">become ERC-20s</text>
  </g>

  <!-- Advanced applications at top -->
  <g transform="translate(350, 95)">
    <rect x="-220" y="-8" width="440" height="16" rx="4" fill="#1a1a3a"/>
    <text y="5" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#FFF">Gaming • Digital Identity • Membership • Collectibles • Art</text>
  </g>

  <!-- Build Order Legend -->
  <g transform="translate(620, 480)" filter="url(#dropShadow)">
    <rect x="-55" y="-15" width="115" height="90" rx="8" fill="#FFF" stroke="#E5E7EB"/>
    <text y="0" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" font-weight="bold" fill="#374151">Build Order</text>
    <g transform="translate(0, 15)">
      <circle cx="-35" cy="0" r="7" fill="#1a1a3a"/>
      <text x="-35" y="3" text-anchor="middle" font-family="Arial, sans-serif" font-size="7" fill="#FFF">1</text>
      <text x="5" y="3" font-family="Arial, sans-serif" font-size="7" fill="#4B5563">EVM + Tokens</text>
    </g>
    <g transform="translate(0, 30)">
      <circle cx="-35" cy="0" r="7" fill="#F97316"/>
      <text x="-35" y="3" text-anchor="middle" font-family="Arial, sans-serif" font-size="7" fill="#FFF">2</text>
      <text x="5" y="3" font-family="Arial, sans-serif" font-size="7" fill="#4B5563">Marketplace</text>
    </g>
    <g transform="translate(0, 45)">
      <circle cx="-35" cy="0" r="7" fill="#06B6D4"/>
      <text x="-35" y="3" text-anchor="middle" font-family="Arial, sans-serif" font-size="7" fill="#FFF">3</text>
      <text x="5" y="3" font-family="Arial, sans-serif" font-size="7" fill="#4B5563">NFT Lending</text>
    </g>
    <g transform="translate(0, 60)">
      <circle cx="-35" cy="0" r="7" fill="#EC4899"/>
      <text x="-35" y="3" text-anchor="middle" font-family="Arial, sans-serif" font-size="7" fill="#FFF">4</text>
      <text x="5" y="3" font-family="Arial, sans-serif" font-size="7" fill="#4B5563">Derivatives</text>
    </g>
  </g>

  <!-- Key difference note -->
  <g transform="translate(350, 580)">
    <rect x="-280" y="-12" width="560" height="24" rx="4" fill="#F3E8FF" stroke="#8B5CF6" stroke-width="1"/>
    <text y="4" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#6B21A8">Unlike ERC-20: Floor price from marketplace activity replaces oracle infrastructure</text>
  </g>

</svg>
